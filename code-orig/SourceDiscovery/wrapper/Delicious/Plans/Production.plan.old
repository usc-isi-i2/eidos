PLAN Production
{
  INPUT:   text p
  OUTPUT:   stream Production_output

  BODY
  {
    /* Generated by PlanGenerator 2.0.00 - 07/02/2007 11:56:08 PDT*/
    /* Plan Type: Main Plan, Live Access*/
    
    /**********  Initialization **********/
    test_makexmlnode2("AgentInputValues",("p",p,"") : agentInputValues)
    test_initializeagentexecution4(agentInputValues : agentInputStream,agentMetadataStream)
    
    /**********  Retrieve Request Bindings **********/
    test_makeandstorerequestbindings("$Entry",("EntryConn1"),agentInputStream : agentInputStream2,err_makeandstorebindings_Entry)
    test_retrieverequestbindings(("$Entry.EntryConn1","Detail1.NewConnector","Home.Connector1"),agentInputStream2 : err_retrievebindings,(Entry_EntryConn1_bindings,Detail1_NewConnector_bindings,Home_Connector1_bindings))
    test_unionvar((err_makeandstorebindings_Entry,err_retrievebindings) : err_unfinished_Entry)
    test_finishrequest(err_unfinished_Entry,"error" : err_Entry,unused_Entry)
    
    /**********  Request Entry_EntryConn1  **********/
    test_fetch("$Entry.EntryConn1",Entry_EntryConn1_bindings : Entry_EntryConn1_page_to_Home,err_fetch_Entry_EntryConn1)
    test_finishrequest(err_fetch_Entry_EntryConn1,"error" : err_Entry_EntryConn1,unused_Entry_EntryConn1)
    
    /**********  Wrapper Home  **********/
    test_makeandstorerequestbindings("Home",("Connector1"),Entry_EntryConn1_page_to_Home : Home_processedData,err_makeandstorebindings_Home)
    test_finishrequest(Home_processedData,"success" : Home_finishedData,err_validate_Home)
    test_unionvar((err_makeandstorebindings_Home) : err_unfinished_Home)
    test_finishrequest(err_unfinished_Home,"error" : err_Home,unused_2_Home)
    
    /**********  Request Home_Connector1  **********/
    test_fetch("Home.Connector1",Home_Connector1_bindings : Home_Connector1_page_to_Detail1,err_fetch_Home_Connector1)
    test_finishrequest(err_fetch_Home_Connector1,"error" : err_Home_Connector1,unused_Home_Connector1)
    
    /**********  Request Detail1_NewConnector  **********/
    test_fetch("Detail1.NewConnector",Detail1_NewConnector_bindings : Detail1_NewConnector_page_to_Detail1,err_fetch_Detail1_NewConnector)
    test_finishrequest(err_fetch_Detail1_NewConnector,"error" : err_Detail1_NewConnector,unused_Detail1_NewConnector)
    
    /**********  Wrapper Detail1  **********/
    test_unionvar((Detail1_NewConnector_page_to_Detail1,Home_Connector1_page_to_Detail1) : Detail1_page)
    test_extract("Detail1",Detail1_page : Detail1_unvalidated_data,err_extract_Detail1)
    test_validate2(Detail1_unvalidated_data : Detail1_data,unused_1_Detail1)
    test_flatten2(Detail1_data,"union" : Detail1_flattened_data,err_flatten_Detail1)
    test_makeandstorerequestbindings("Detail1",("NewConnector"),Detail1_flattened_data : Detail1_processedData,err_makeandstorebindings_Detail1)
    test_finishrequest(Detail1_processedData,"success" : Detail1_finishedData,err_validate_Detail1)
    test_unionvar((err_extract_Detail1,err_flatten_Detail1,err_makeandstorebindings_Detail1) : err_unfinished_Detail1)
    test_finishrequest(err_unfinished_Detail1,"error" : err_Detail1,unused_2_Detail1)
    
    /**********  Error Handling   **********/
    test_unionvar((err_Entry,err_Entry_EntryConn1,err_Home_Connector1,err_Detail1_NewConnector,err_Home,err_Detail1) : errors)
    test_unionvar((err_validate_Home,err_validate_Detail1) : validation_errors)
    
    /**********  Convert data to XML   **********/
    test_generateplanoutput(agentMetadataStream : agentMetadataStream_xml)
    test_generateplanoutput(agentInputStream : agentInputStream_xml)
    test_generateplanoutput(Detail1_flattened_data : Detail1_data_xml)
    test_generateplanoutput(errors : errors_xml)
    test_generateplanoutput(validation_errors : validation_errors_xml)
    
    /**********  Combine output streams  **********/
    test_unionvar((agentInputStream_xml,agentMetadataStream_xml,Detail1_data_xml,errors_xml,validation_errors_xml) : Production_output)
  }
}